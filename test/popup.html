<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Popup Embed Test - Surface Form</title>
    <link rel="stylesheet" href="common.css">
    <script src="../surface_tag.js" site-id="cm5e6essv0002l603lv3eeqtw"></script>
  </head>
  <body>
    <div class="container">
      <h1>üß™ Popup Embed Test</h1>
      <p><a href="index.html">‚Üê Back to Test Suite</a></p>
      
      <div class="config-section">
        <strong>Configuration:</strong><br>
        Form Source: <code id="formSrc">https://dev.withsurface.com/s/cmhmh2ibp000xl40b0ynyiupg</code><br>
        Environment ID: <code id="environmentId">cm5e6essv0002l603lv3eeqtw</code><br>
        Debug Mode: <code id="debugMode">false</code> (add <code>?surfaceDebug=true</code> to enable)
      </div>

      <!-- Events Summary -->
      <h2>üìä Events Summary</h2>
      <div class="events-summary">
        <div class="summary-card">
          <div class="summary-count" id="totalEvents">0</div>
          <div class="summary-label">Total Events</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="sentEvents">0</div>
          <div class="summary-label">Sent to Iframe</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="receivedEvents">0</div>
          <div class="summary-label">Received from Iframe</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="storeUpdateEvents">0</div>
          <div class="summary-label">STORE_UPDATE</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="leadDataEvents">0</div>
          <div class="summary-label">LEAD_DATA_UPDATE</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="sendDataEvents">0</div>
          <div class="summary-label">SEND_DATA</div>
        </div>
      </div>

      <!-- Events Log -->
      <h2>üìù Events Log</h2>
      <div class="button-group">
        <button class="clear-log" onclick="clearEventLog()">Clear Log</button>
        <button class="secondary" onclick="exportEvents()">Export Events</button>
      </div>
      <div class="events-log" id="eventsLog"></div>

      <!-- Popup Embed -->
      <div class="section">
        <h2>Popup Embed</h2>
        <p>Click the buttons below to open the form in different popup sizes.</p>
        <div class="button-group">
          <button class="surface-popup-button">Open Popup (Medium)</button>
          <button class="surface-popup-small">Open Popup (Small)</button>
          <button class="surface-popup-large">Open Popup (Large)</button>
        </div>
      </div>
    </div>

    <script src="event-monitor.js"></script>
    <script src="config.js"></script>
    <script>
      const { formSrc } =
        window.surfaceTestConfig || {
          formSrc: "https://dev.withsurface.com/s/cmhmh2ibp000xl40b0ynyiupg",
        };
      
      // Initialize event monitoring
      initializeEventMonitoring();

      // Initialize popup embeds
      (function() {
        // Popup - Medium (default)
        const popupMedium = new SurfaceEmbed(
          formSrc,
          "popup",
          "surface-popup-button",
          { popupSize: "medium" }
        );

        // Popup - Small
        const popupSmall = new SurfaceEmbed(
          formSrc,
          "popup",
          "surface-popup-small",
          { popupSize: "small" }
        );

        // Popup - Large
        const popupLarge = new SurfaceEmbed(
          formSrc,
          "popup",
          "surface-popup-large",
          { popupSize: "large" }
        );

        console.log("‚úÖ Popup embeds initialized");
        console.log("üìä Event monitoring active");
      })();
    </script>
  </body>
</html>

