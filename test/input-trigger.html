<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Input Trigger Embed Test - Surface Form</title>
    <link rel="stylesheet" href="common.css">
    <script src="../surface_tag.js" site-id="cllo318mt0003mb08hnp0f5zy"></script>
  </head>
  <body>
    <div class="container">
      <h1>üß™ Input Trigger Embed Test</h1>
      <p><a href="index.html">‚Üê Back to Test Suite</a></p>
      
      <div class="config-section">
        <strong>Configuration:</strong><br>
        Form Source: <code id="formSrc">https://forms.withsurface.com/s/cmjren87f0022l40bqtyjvmbe</code><br>
        Environment ID: <code id="environmentId">cllo318mt0003mb08hnp0f5zy</code><br>
        Debug Mode: <code id="debugMode">false</code> (add <code>?surfaceDebug=true</code> to enable)
      </div>

      <!-- Events Summary -->
      <h2>üìä Events Summary</h2>
      <div class="events-summary">
        <div class="summary-card">
          <div class="summary-count" id="totalEvents">0</div>
          <div class="summary-label">Total Events</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="sentEvents">0</div>
          <div class="summary-label">Sent to Iframe</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="receivedEvents">0</div>
          <div class="summary-label">Received from Iframe</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="storeUpdateEvents">0</div>
          <div class="summary-label">STORE_UPDATE</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="leadDataEvents">0</div>
          <div class="summary-label">LEAD_DATA_UPDATE</div>
        </div>
        <div class="summary-card">
          <div class="summary-count" id="sendDataEvents">0</div>
          <div class="summary-label">SEND_DATA</div>
        </div>
      </div>

      <!-- Events Log -->
      <h2>üìù Events Log</h2>
      <div class="button-group">
        <button class="clear-log" onclick="clearEventLog()">Clear Log</button>
        <button class="secondary" onclick="exportEvents()">Export Events</button>
      </div>
      <div class="events-log" id="eventsLog"></div>

      <!-- Input Trigger Embed -->
      <div class="section">
        <h2>Input Trigger Embed</h2>
        <p>Enter an email address and submit. The form will automatically open with the email pre-filled.</p>
        <div class="form-input-trigger">
          <form class="surface-form-handler">
            <label for="email-input">Email Address:</label>
            <input 
              type="email" 
              id="email-input" 
              placeholder="Enter your email"
              required
            />
            <button type="submit">Submit & Open Form</button>
          </form>
        </div>
      </div>

      <div class="section">
        <h2>Stress Test: Input Trigger Embed</h2>
        <p>Enter an email address and submit. The form will automatically open with the email pre-filled.</p>
        <div class="form-input-trigger">
          <form class="surface-form-handler surface-form-handler-stress-test">
            <label for="email-input">Email Address:</label>
            <input 
              type="email" 
              id="email-input" 
              placeholder="Enter your email"
              required
            />
            <button type="submit">Submit & Open Form</button>
          </form>
        </div>
      </div>
    </div>

    <script src="event-monitor.js"></script>
    <script src="config.js"></script>
    <script src="stressTest.js"></script>
    <script data-question-id="NNnmMyOcCpUT">
      const { formSrc } =
        window.surfaceTestConfig || {
          formSrc: "https://forms.withsurface.com/s/cmjren87f0022l40bqtyjvmbe",
        };
      
      // Initialize event monitoring
      initializeEventMonitoring();

      // Initialize input trigger embed
      (function() {
        const inputTrigger = new SurfaceEmbed(
          formSrc,
          "input-trigger",
          "surface-form-button",
        );

        console.log("‚úÖ Input trigger embed initialized");
        console.log("üìä Event monitoring active");
      })();
    </script>
  </body>
</html>

